---
title: "「ドメイン駆動設計を始めよう」を読んだ"
emoji: "🦍"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: ["DDD"]
published: false
---

https://www.oreilly.co.jp/books/9784814400737/


## この本を読む前に読んだ本


- [エリック・エヴァンスのドメイン駆動設計: ソフトウェアの核心にある複雑さに立ち向かう](https://amzn.asia/d/1m11xqN)
- [Domain Modeling Made Functional: Tackle Software Complexity with Domain-Driven Design and F#](https://amzn.asia/d/ejmv9n3)
- [ドメイン駆動設計 モデリング/実装ガイド](https://booth.pm/ja/items/1835632)

※ [実践DDD本](https://amzn.asia/d/3aMYS20)は読んでいません。

## 書かないこと

- DDDとは何か
- 書籍に書かれていた内容の詳細な説明

翻訳者の増田さんの概要スライド
https://speakerdeck.com/masuda220/learning-domain-driven-design-japanese-edition-findy-2024-7

## 訳語について

本書ではDDDで従来使われていた訳語とは異なる訳語が使われています。
その訳語を使ってDDDを定義すると以下のようになります。

![新しい訳語でのDDDの定義](/images//start-ddd-slide-p13.png)

かなり親しみやすい表現になりましたね。

この翻訳は、従来のDDDの訳語とは大きく変えられていたため、いくつか批判も見受けられましたが、私はこの訳語には肯定的です。

理由は以下の3つです。
- 書籍内で従来のDDDの訳語の対応が明記されていること
- 従来のDDDの訳語の難解さから初学者の学習を妨げる可能性があること
- DDDの実践の際に訳語の難解さから、コミュニケーションをかえって難しくしてしまうこと

本書はDDDの実践を通して、導入の難しさを経験してきた著者がその経験をもとに現実のチームでDDDを導入するための観点が多分に含まれている書籍であることから、著者の意図にも反さない訳語であると思います。

実際に翻訳者の増田さんは著者のVlad Khononovさんに了承を得て訳語を変更しているとのことです。

![訳語対応表](/images//start-ddd-slide-p12.png)
[翻訳者の増田さんの概要スライド P.12 より](https://speakerdeck.com/masuda220/learning-domain-driven-design-japanese-edition-findy-2024-7)

特に「ユビキタス言語」が「同じ言葉」になってることが良いと思います。
私自身もDDDの「ユビキタス言語」をイメージしながら「同じ言葉」を使うという表現をすることが多かったため、この訳語の変更には好感を持ちました。

## 1部 設計の基本方針

第1部はDDDの最も重要な考えである、開発者が事業活動を理解することの重要性と、その観点について述べられています。
DDDの他の書籍と大筋は同じですが、本書特有の平易な訳語のおかげで直感的に理解しやすい内容になっています。
また、複数の具体的な事例が例示されているため、より理解が深まりやすいと感じました。

## 2部 実装方法の選択

第2部では、DDDの実装方法について述べられています。
第1部で説明された、中核か否か、データ構造は複雑か、お金を扱うか、分析・監査があるかなどを元に、トランザクションスクリプト、アクティブレコード、ドメインモデル、イベント履歴式ドメインモデルの4つの実装方法から選択するという考え方が示されています。

![実装方法の選択](/images//start-ddd-slide-p39.png)

第2部は個人的には、いくつか疑問が残る内容でした。

まず、データ構造が複雑な時にはアクティブレコード^[ここでいうアクティブレコードは設計パターンです。ORMではありません]を選択するという考え方についてです。

利用する言語によりますが、多くの場合、アクティブレコードパターンを採用することはアクティブレコードのORMを利用することが前提となります。
ORMによってはアクティブレコードを使わなくても複雑なデータ構造を扱うことができます。[Prisma](https://www.prisma.io/docs)などはその典型です。

どちらにせよ、手続的なコードを書くことになるため、トランザクションスクリプトであると割り切ってしまった方が、余計な迷いがなくなり、話がシンプルになると感じました。

また、古いオブジェクト思考に基づいた実装方法が含まれてしまっている部分を差し引いて読むべき箇所が含まれています。
特に値オブジェクトの等価性を==で判定するためにEqualsメソッドをオーバーライドするという部分は、現代の言語やフレームワークにおいては適切な方法ではないと感じました。

## 3部 ドメイン駆動設計の実践

時間がなかったので経営陣がある開発をデータベース管理チームにまかせました
https://x.com/majimaccho_/status/1831119775277482106

『課題の合意なしに解決方針の話をしても無意味である。解決方針の合意なしに実現手段の話をしても無意味である』

エフラット・ゴールドラット・アシュラグ
https://x.com/majimaccho_/status/1831116036252598709

中核から補完になった、つまり事業収益に貢献しない場合、複雑さを取り除く
https://x.com/majimaccho_/status/1830390406816895437

## 4部 他の方法論や設計技法との関係

スタースキーマ、スノーフレークスキーマとイベントソーシングと正規化
https://x.com/majimaccho_/status/1831114423467225365


サブドメイン（業務領域）と境界づけられたコンテキスト？

https://x.com/majimaccho_/status/1830750962010694035

境界づけられたコンテキストよりもサブドメイン（業務領域）でマイクロサービスを切るちょうど良さ

https://x.com/majimaccho_/status/1830752942250762480


## 付録


## 感想

DDDの事業領域の分析が重要であることと、組織で「ユビキタス言語（同じ言葉）」を使うことの重要性には強く同意します。

ただし、現代は型システムやイミュータビリティを前提とした設計が存在感を増しており、実装をどうするかはDDDではないところに答えを求めた方が良いと感じました。

また、全てのDDDの書籍でDB設計の話をしていないことに違和感があります。
イベント履歴式ドメインモデルについて、「中核の業務領域」かつ「お金を扱う、分析または監査記録」である場合に適しているとされています。

DB設計においては、中核かどうかに関わらず、お金を扱う、分析または監査記録がある場合には、イベントソーシングを採用するはずです。
アプリケーションレイヤーの話のみでDB設計の話が一切出てこないのは、モデリング・設計論としては不十分だと感じました。



https://x.com/majimaccho_/status/1825890000195694837
https://x.com/majimaccho_/status/1825891706459533587